'use strict';(function(J){function D(g){g()}function E(g){g(this)}function G(){if(u){do q=!1,A.shift()();while(--u)}q=!1}function r(g){function l(a){0===f&&(F(a)?a.then(l,c):(e=a,f=2,null!==b&&("function"===typeof b?b(a):b.forEach(E,a),b=null),d=null,null!==k&&("function"===typeof k?k():k.forEach(D),k=null)))}function c(a){0===f&&(e=a,f=1,null!==d&&("function"===typeof d?d(a):d.forEach(E,a),d=null),b=null,null!==k&&("function"===typeof k?k():k.forEach(D),k=null))}var e,f=0,b=null,d=null,k=null,h=
{then:function(a,m){if(0===f)return H(function(v,y){var w="function"===typeof a?function(){v(a(e))}:v,I="function"===typeof m?function(){y(m(e))}:y;null!==b?"function"===typeof b?b=[b,w]:b.push(w):b=w;null!==d?"function"===typeof d?d=[d,I]:d.push(I):d=I});try{return 2===f?"function"===typeof a?B(a(e)):t:"function"===typeof m?p(m(e)):t}catch(v){return p(v)}},"catch":function(a){if(0===f)return H(function(m){null!==d?"function"===typeof d?d=[d,function(){m(a(e))}]:d.push(function(){m(a(e))}):d=function(){m(a(e))};
null!==b?"function"===typeof b?b=[b,m]:b.push(m):b=m});if(2===f)return B(e);try{return"function"===typeof a?B(a(e)):t}catch(m){return p(m)}},"finally":function(a){if(0===f)null!==k?"function"===typeof k?k=[k,a]:k.push(a):k=a;else try{a()}catch(m){return p(m)}return h}};!0===C&&(h[z]="Promise");if(!0===q)A.push(function(){try{g(l,c)}catch(a){c(a)}}),u=u+1|0;else{n=n+1|0;if(q=128===n)try{g(l,c)}catch(a){c(a)}else{try{g(l,c)}catch(a){c(a)}!0===q&&1===n&&G()}n=n-1|0}return h}function H(g){function l(h){0===
e&&(c=h,e=1,null!==b&&("function"===typeof b?b(h):b.forEach(E,h),b=null),f=null,null!==d&&("function"===typeof d?d():d.forEach(D),d=null))}var c,e=0,f=null,b=null,d=null,k={then:function(h,a){if(0===e)return r(function(m,v){var y="function"===typeof h?function(){m(h(c))}:m,w="function"===typeof a?function(){v(a(c))}:v;null!==f?"function"===typeof f?f=[f,y]:f.push(y):f=y;null!==b?"function"===typeof b?b=[b,w]:b.push(w):b=w});try{return 2===e?"function"===typeof h?x(h(c)):t:"function"===typeof a?p(a(c)):
t}catch(m){return p(m)}},"catch":function(h){if(0===e)return r(function(a){null!==b?"function"===typeof b?b=[b,function(){a(h(c))}]:b.push(function(){a(h(c))}):b=function(){a(h(c))};null!==f?"function"===typeof f?f=[f,a]:f.push(a):f=a});if(2===e)return x(c);try{return"function"===typeof h?x(h(c)):t}catch(a){return p(a)}},"finally":function(h){0===e?null!==d?"function"===typeof d?d=[d,h]:d.push(h):d=h:h();return k}};!0===C&&(k[z]="Promise");try{g(function m(a){0===e&&(F(a)?a.then(m,l):(c=a,e=2,null!==
f&&("function"===typeof f?f(a):f.forEach(E,a),f=null),null!==d&&("function"===typeof d?d():d.forEach(D),d=null),b=null))},l)}catch(h){l(h)}return k}function x(g){if("object"===typeof g&&null!==g&&"function"===typeof g.then)return g;var l={then:function(c){if("function"!==typeof c)return l;if(!0===q)return H(function(f,b){A.push(function(){try{f(c(g))}catch(d){b(d)}});u=u+1|0});n=n+1|0;var e=null;try{(q=128===n)?A.push(function(){c(g)}):(e=c(g),!0===q&&1===n&&G())}catch(f){return p(f)}finally{n=n-
1|0}return B(e)},"catch":function(){return l},"finally":function(c){if("function"===typeof c)if(!0===q)A.push(c),u=u+1|0;else{n=n+1|0;try{(q=128===n)?(c(),q=!1):(c(),!0===q&&1===n&&G())}catch(e){return p(e)}finally{n=n-1|0}}return l}};!0===C&&(l[z]="Promise");return l}function B(g){if("object"===typeof g&&null!==g&&"function"===typeof g.then)return g;var l={then:function(c){try{return"function"===typeof c?x(c(g)):t}catch(e){return p(e)}},"finally":function(c){try{"function"===typeof c&&c()}catch(e){return p(e)}return l},
"catch":function(){return l}};!0===C&&(l[z]="Promise");return l}function p(g){var l={then:function(c,e){try{return"function"===typeof e?x(e(g)):t}catch(f){return p(f)}},"finally":function(c){try{"function"===typeof c&&c()}catch(e){return p(e)}return l},"catch":function(c){try{return"function"===typeof c?x(c(g)):t}catch(e){return p(e)}}};!0===C&&(l[z]="Promise");return l}const A=[],F=r.isPromise=function(g){return"object"===typeof g&&null!==g&&"function"===typeof g.then};var n=0,q=!1,u=0,z="undefined"!==
typeof Symbol&&Symbol.toStringTag,C="symbol"===typeof z,t=x();r.resolve=B;r.reject=p;r.race=function(g){return r(function(l,c){function e(h){b&&(b=0,l(h))}function f(h){b&&(b=0,c(h))}for(var b=1,d=0,k;d<g.length&&b;d=d+1|0)F(k=g[d])?k.then(e,f):e(k)})};r.all=function(g){return r(function(l,c){function e(a){h.then(function(m){d[a]=m;b=b-1|0;0===b&&l(d)},function(m){0<b&&(b=-1,c(m))})}for(var f=g.length|0,b=f,d=[],k=0,h;k<f;k=k+1|0)d[k]=F(h=g[k])?e(k):h})};J.SPromise=r})("undefined"===typeof self?this:
self);//AnonyCo
