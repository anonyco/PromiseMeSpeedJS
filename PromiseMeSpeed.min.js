'use strict';(function(F){function B(g){g()}function C(g){g(this)}function E(){if(w){do t=!1,D.shift()();while(--w)}t=!1}function u(g){function k(f){0===c&&(q(f)?f.then(k,d):(a=f,c=2,null!==b&&("function"===typeof b?b(f):b.forEach(C,f),b=null),e=null,null!==m&&("function"===typeof m?m():m.forEach(B),m=null)))}function d(f){0===c&&(a=f,c=1,null!==e&&("function"===typeof e?e(f):e.forEach(C,f),e=null),b=null,null!==m&&("function"===typeof m?m():m.forEach(B),m=null))}var a,c=0,b=null,e=null,m=null,h=
{then:function(f,l){if(0===c)return z(function(x){"function"===typeof f&&(null!==b?"function"===typeof b?b=[b,function(){x(f(a))}]:b.push(function(){x(f(a))}):b=function(){x(f(a))});"function"===typeof l&&(null!==e?"function"===typeof e?e=[e,function(){x(l(a))}]:e.push(function(){x(l(a))}):e=function(){x(l(a))})});try{var n=null;2===c?"function"===typeof f&&(n=f(a)):"function"===typeof l&&(n=r(l(a)));return q(n)?n:A(n)}catch(x){return r(x)}},"catch":function(f){if(0===c)return z(function(n){null!==
e?"function"===typeof e?e=[e,function(){n(f(a))}]:e.push(function(){n(f(a))}):e=function(){n(f(a))};null!==b?"function"===typeof b?b=[b,n]:b.push(n):b=n});if(2===c)return A(a);try{var l=f(a);return q(l)?l:A(l)}catch(n){return r(n)}},"finally":function(f){if(0===c)null!==m?"function"===typeof m?m=[m,f]:m.push(f):m=f;else try{f()}catch(l){return r(l)}return h}};!1!==v&&(h[v]="Promise");if(t)D.push(function(){try{g(k,d)}catch(f){d(f)}}),w=w+1|0;else{p=p+1|0;if(128===p){t=!0;try{g(k,d)}catch(f){d(f)}}else{try{g(k,
d)}catch(f){d(f)}t&&1===p&&E()}p=p-1|0}return h}function z(g){function k(h){0===a&&(d=h,a=1,null!==b&&("function"===typeof b?b(h):b.forEach(C,h),b=null),c=null,null!==e&&("function"===typeof e?e():e.forEach(B),e=null))}var d,a=0,c=null,b=null,e=null,m={then:function(h,f){if(0===a)return u(function(n){"function"===typeof h&&(null!==c?"function"===typeof c?c=[c,function(){n(h(d))}]:c.push(function(){n(h(d))}):c=function(){n(h(d))});"function"===typeof f&&(null!==b?"function"===typeof b?b=[b,function(){n(f(d))}]:
b.push(function(){n(f(d))}):b=function(){n(f(d))})});try{var l=null;2===a?"function"===typeof h&&(l=h(d)):"function"===typeof f&&(l=r(f(d)));return q(l)?l:y(l)}catch(n){return r(n)}},"catch":function(h){if(0===a)return u(function(l){null!==b?"function"===typeof b?b=[b,function(){l(h(d))}]:b.push(function(){l(h(d))}):b=function(){l(h(d))};null!==c?"function"===typeof c?c=[c,l]:c.push(l):c=l});if(2===a)return y(d);try{var f=h(d);return q(f)?f:y(f)}catch(l){return r(l)}},"finally":function(h){0===a?
null!==e?"function"===typeof e?e=[e,h]:e.push(h):e=h:h();return m}};!1!==v&&(m[v]="Promise");try{g(function(h){0===a&&(q(h)?h.then(acceptP,k):(d=h,a=2,null!==c&&("function"===typeof c?c(h):c.forEach(C,h),c=null),b=null,null!==e&&("function"===typeof e?e():e.forEach(B),e=null)))},k)}catch(h){k(h)}return m}function y(g){if(q(g))return z(function(d,a){g.then(d,a)});var k={then:function(d){if(t)return z(function(c,b){D.push(function(){try{var e=d(g);q(e)?e.then(c,b):c(e)}catch(m){b(m)}});w=w+1|0});p=
p+1|0;var a=null;try{128===p?(t=!0,a=d(g)):(a=d(g),t&&1===p&&E())}catch(c){return r(c)}finally{p=p-1|0}return q(a)?a:A(a)},"catch":function(){return k},"finally":function(d){if(t)D.push(d),w=w+1|0;else{p=p+1|0;try{128===p?(t=!0,d(),t=!1):(d(),t&&1===p&&E())}catch(a){return r(a)}finally{p=p-1|0}}return k}};!1!==v&&(k[v]="Promise");return k}function A(g){if(q(g))return z(function(d,a){g.then(d,a)});var k={then:function(d){try{var a=d(g);return q(a)?a:y(a)}catch(c){return r(c)}},"finally":function(d){try{d()}catch(a){return r(a)}return k},
"catch":function(){return k}};!1!==v&&(k[v]="Promise");return k}function r(g){var k={then:function(d,a){try{var c="function"===typeof a?a(g):k;return q(c)?c:y(c)}catch(b){return r(b)}},"finally":function(d){try{d()}catch(a){return r(a)}return k},"catch":function(d){try{var a=d(g);return q(a)?a:y(a)}catch(c){return r(c)}}};!1!==v&&(k[v]="Promise");return k}const D=[],q=u.isPromise=function(g){return"object"===typeof g&&null!==g&&"function"===typeof g.then};var p=0,t=!1,w=0,v="undefined"!==typeof Symbol&&
Symbol.toStringTag;u.resolve=A;u.reject=r;u.race=function(g){return u(function(k,d){for(var a=!1,c=0;c<g.length;c=c+1|0){var b=g[c];if(q(b)){if(b.then(function(e){!1===a&&(a=!0,k(e))},function(e){!1===a&&(a=!0,d(e))}),a)break}else{a=!0;k(b);break}}})};u.all=function(g){return u(function(k,d){for(var a=0,c=[],b=0;b<g.length;b=b+1|0){var e=g[b];q(e)?(a=a+1|0,e.then(function(m){c[b]=m;a=a-1|0;0===a&&k(c)},function(m){0<a&&(a=-1,d(m))})):c[b]=e}a||k(c)})};F.SPromise=u})("undefined"===typeof self?this:
self);//Anonyco
