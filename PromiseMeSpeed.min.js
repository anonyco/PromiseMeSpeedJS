'use strict';(function(K){function D(f){f()}function E(f){f(this)}function G(){if(u){do q=!1,A.shift()();while(--u)}q=!1}function J(f){return function(l){try{"function"===typeof l&&l()}catch(d){return p(d)}return f}}function r(f){function l(a){0===e&&(F(a)?a.then(l,d):(g=a,e=2,null!==b&&("function"===typeof b?b(a):b.forEach(E,a),b=null),c=null,null!==k&&("function"===typeof k?k():k.forEach(D),k=null)))}function d(a){0===e&&(g=a,e=1,null!==c&&("function"===typeof c?c(a):c.forEach(E,a),c=null),b=null,
null!==k&&("function"===typeof k?k():k.forEach(D),k=null))}var g,e=0,b=null,c=null,k=null,h={then:function(a,m){if(0===e)return H(function(v,y){var w="function"===typeof a?function(){v(a(g))}:v,I="function"===typeof m?function(){y(m(g))}:y;null!==b?"function"===typeof b?b=[b,w]:b.push(w):b=w;null!==c?"function"===typeof c?c=[c,I]:c.push(I):c=I});try{return 2===e?"function"===typeof a?B(a(g)):t:"function"===typeof m?p(m(g)):t}catch(v){return p(v)}},"catch":function(a){if(0===e)return H(function(m){null!==
c?"function"===typeof c?c=[c,function(){m(a(g))}]:c.push(function(){m(a(g))}):c=function(){m(a(g))};null!==b?"function"===typeof b?b=[b,m]:b.push(m):b=m});if(2===e)return B(g);try{return"function"===typeof a?B(a(g)):t}catch(m){return p(m)}},"finally":function(a){if(0===e)null!==k?"function"===typeof k?k=[k,a]:k.push(a):k=a;else try{a()}catch(m){return p(m)}return h}};!0===C&&(h[z]="Promise");if(!0===q)A.push(function(){try{f(l,d)}catch(a){d(a)}}),u=u+1|0;else{n=n+1|0;if(q=128===n)try{f(l,d)}catch(a){d(a)}else{try{f(l,
d)}catch(a){d(a)}!0===q&&1===n&&G()}n=n-1|0}return h}function H(f){function l(h){0===g&&(d=h,g=1,null!==b&&("function"===typeof b?b(h):b.forEach(E,h),b=null),e=null,null!==c&&("function"===typeof c?c():c.forEach(D),c=null))}var d,g=0,e=null,b=null,c=null,k={then:function(h,a){if(0===g)return r(function(m,v){var y="function"===typeof h?function(){m(h(d))}:m,w="function"===typeof a?function(){v(a(d))}:v;null!==e?"function"===typeof e?e=[e,y]:e.push(y):e=y;null!==b?"function"===typeof b?b=[b,w]:b.push(w):
b=w});try{return 2===g?"function"===typeof h?x(h(d)):t:"function"===typeof a?p(a(d)):t}catch(m){return p(m)}},"catch":function(h){if(0===g)return r(function(a){null!==b?"function"===typeof b?b=[b,function(){a(h(d))}]:b.push(function(){a(h(d))}):b=function(){a(h(d))};null!==e?"function"===typeof e?e=[e,a]:e.push(a):e=a});if(2===g)return x(d);try{return"function"===typeof h?x(h(d)):t}catch(a){return p(a)}},"finally":function(h){0===g?null!==c?"function"===typeof c?c=[c,h]:c.push(h):c=h:h();return k}};
!0===C&&(k[z]="Promise");try{f(function m(a){0===g&&(F(a)?a.then(m,l):(d=a,g=2,null!==e&&("function"===typeof e?e(a):e.forEach(E,a),e=null),null!==c&&("function"===typeof c?c():c.forEach(D),c=null),b=null))},l)}catch(h){l(h)}return k}function x(f){if("object"===typeof f&&null!==f&&"function"===typeof f.then)return f;var l={then:function(d){if("function"!==typeof d)return l;if(!0===q)return H(function(e,b){A.push(function(){try{e(d(f))}catch(c){b(c)}});u=u+1|0});n=n+1|0;var g=null;try{(q=128===n)?
A.push(function(){d(f)}):(g=d(f),!0===q&&1===n&&G())}catch(e){return p(e)}finally{n=n-1|0}return B(g)},"catch":function(){return l},"finally":function(d){if("function"===typeof d)if(!0===q)A.push(d),u=u+1|0;else{n=n+1|0;try{(q=128===n)?(d(),q=!1):(d(),!0===q&&1===n&&G())}catch(g){return p(g)}finally{n=n-1|0}}return l}};!0===C&&(l[z]="Promise");return l}function B(f){if("object"===typeof f&&null!==f&&"function"===typeof f.then)return f;var l={then:function(d,g){try{return"function"===typeof g?x(d(f)):
t}catch(e){return p(e)}},"finally":J(l),"catch":function(){return l}};!0===C&&(l[z]="Promise");return l}function p(f){var l={then:function(d,g){try{return"function"===typeof g?x(g(f)):t}catch(e){return p(e)}},"finally":J(l),"catch":function(d){try{return"function"===typeof d?x(d(f)):t}catch(g){return p(g)}}};!0===C&&(l[z]="Promise");return l}const A=[],F=r.isPromise=function(f){return"object"===typeof f&&null!==f&&"function"===typeof f.then};var n=0,q=!1,u=0,z="undefined"!==typeof Symbol&&Symbol.toStringTag,
C="symbol"===typeof z,t=x();r.resolve=B;r.reject=p;r.race=function(f){return r(function(l,d){function g(h){b&&(b=0,l(h))}function e(h){b&&(b=0,d(h))}for(var b=1,c=0,k;c<f.length&&b;c=c+1|0)F(k=f[c])?k.then(g,e):g(k)})};r.all=function(f){return r(function(l,d){function g(a){h.then(function(m){c[a]=m;b=b-1|0;0===b&&l(c)},function(m){0<b&&(b=-1,d(m))})}for(var e=f.length|0,b=e,c=[],k=0,h;k<e;k=k+1|0)c[k]=F(h=f[k])?g(k):h})};K.SPromise=r})("undefined"===typeof self?this:self);//AnonyCo
